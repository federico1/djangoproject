{% extends "student_base.html" %}
{% load i18n %}

{% block title %}
{{ object.title }}
{% endblock %}

{% block nav %}

<nav class="navbar navbar-expand-md navbar-bark bg-dark">
    <a class="navbar-brand mb-0 h1 text-white" href="#"> {{ object.title }}</a>

    <div class="navbar-collapse">


        <ul class="navbar-nav ml-auto">

            <li class="nav-item top-audio-1 d-none">

            </li>


            <li class="nav-item dropdown ml-3">
                <a class="nav-link dropdown-toggle text-white" data-toggle="dropdown" href="#">
                    <i class="fa fa-lg fa-cog text-white"></i> {{request.user}}
                </a>
                <div class="dropdown-menu dropdown-menu-right">
                    <a class="dropdown-item" href="{%url 'student_course_list'%}">Dashboard</a>
                    {% if request.user.is_authenticated %}
                    <a class="dropdown-item" href="{% url "logout" %}">Sign out</a>
                    {%endif%}
                </div>
            </li>
        </ul>

    </div>
</nav>

{% endblock %}

{% block content %}

<div class="container-fluid py-0 px-1">
    <div class="row">
        <div class="col">
            <nav id="sidebar" class="sidebar-wrapper">
                <div class="sidebar-content">
                    <div class="sidebar-brand">
                        <a href="{% url "student_course_detail" object.id %}"> Course Materials </a>
                    </div>
                    <!-- sidebar-search  -->
                    <div class="sidebar-menu">
                        <ul>

                            {% for m in object.modules.all %}

                            <li data-id="{{ m.id }}" class="sidebar-dropdown">
                                <a href="javascript:;" class="{% if m == module %} active {% endif %}">
                                    {{ m.title }}
                                </a>

                                <div class="sidebar-submenu">
                                    <ul>
                                        {% for content in m.contents.all %}
                                        {% with item=content.item %}

                                        <li>
                                            {% if content.id in completed_contents or active_content.object.id  == content.id %}

                                            <a class="{% if content.id in completed_contents %}complete{% endif %} {% if active_content.object.id  == content.id %}pin{% endif %}"
                                                href="{% url 'student_course_detail_module' object.id m.id %}?content={{content.id}}">

                                                <i title=" {{ content.content_type }}"
                                                    class="fa {{ content.content_type }}"></i>
                                                {{ item.title }}

                                            </a>

                                            {% else %}
                                            <a href="javascript:;">
                                                <i title=" {{ content.content_type }}"
                                                    class="fa {{ content.content_type }}"></i>
                                                {{ item.title }}
                                            </a>
                                            {% endif %}
                                        </li>
                                        {% endwith %}
                                        {% endfor %}

                                        {% if m.quiz != None and m.quiz_id in taken_quizzes %}
                                        <li>
                                            <a class="complete"
                                                href="{% url 'student_course_detail_module' object.id m.id %}?content={{m.quiz_id}}&type=quiz">
                                                <i class="fa fa-question-circle-o"></i>
                                                Quiz </a>
                                        </li>
                                        {% elif m.quiz != None %}
                                        <li>
                                            <a href="javascript:;">
                                                <i title="Quiz" class="fa fa-question-circle-o"></i>
                                                Quiz
                                            </a>
                                        </li>
                                        {% endif %}
                                    </ul>
                                </div>
                            </li>

                            {% empty %}
                            <li class="menu__item">No modules yet.</li>

                            {% endfor %}

                        </ul>
                    </div>
                    <!-- sidebar-menu  -->

                    {% if content_completed == True and object.quiz is not None %}

                    <div class="sidebar-brand">

                        <a href="{% url "student_course_detail" object.id %}?type=quiz" class="btn btn-primary">
                            Take Quiz </a>
                    </div>

                    {% endif %}

                </div>
                <!-- sidebar-content  -->
            </nav>
        </div>
    </div>
</div>


{% endblock %}

{% block scripts %}

<style>
    .sidebar-wrapper {
        position: fixed;
        left: 2px;
        width: 300px;
        border-radius: 0;
        top: 51px;
        overflow: hidden scroll;
        max-height: 90vh;
    }
</style>

<script>

    $("#top-nav").hide();


    $(document).ready(function () {

    });

</script>

{% endblock %}